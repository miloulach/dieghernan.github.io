---
title: "Beautiful Maps with R (I): Fishnets. Honeycombs and Pixels"
subtitle: "Awesome simplified maps with R"
tags: [R,beautiful_maps, maps, sf]

date: 2019-05-30
output: github_document
---

layout: post
share-img: https://dieghernan.github.io/assets/figs/20190513_imgpost.png
img-to-head: true
linktormd: true


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(global.par = TRUE)
rm(list = ls())


```

Sometimes you like to produce maps with special layouts. I specially like maps with modified geometries, e.g. simplifiying the original shapes to squares or dots. When doing a little search over the web I found the fantastic post [Fishnets and Honeycomb: Square vs. Hexagonal Spatial Grids](http://strimas.com/spatial/hexagonal-grids/) by [Matt Strimas-Mackey](http://strimas.com/about/) that was a huge inspiration (by the way, don't miss [his blog](http://strimas.com/#posts), full of very interesting pieces of work). 

The only thing I was not completely comfortable with was that the post used the [old-fashioned](https://geocompr.robinlovelace.net/intro.html#the-history-of-r-spatial) `sp` package instead of my personal fav, the 'sf' package, (the post was published in 2016, note that author has also moved to the `sf` package since then). So I decided to explore further options with `sf`.

The approach is similar (using grids over a map and work with that) but using [`st_make_grid`](https://www.rdocumentation.org/packages/sf/versions/0.7-4/topics/st_make_grid). I also expanded it by grouping the grids and also producing dots over the geometries. So basically I produced 5 variations of the map:

| Type          | Replacement | Grouped  |
| ------------- |:-------------:| -----:|
| **Fishnet** | Square | No
| **Puzzle** | Square | Yes
| **Honeycomb** | Hexagon | No
| **Hexbin** | Hexagon | Yes
| **Pixel** | Dot | No


## Required R packages

```{r libs, warning=FALSE, message=FALSE, tidy='styler'}
library(sf)
library(rnaturalearth)
library(dplyr)
```

### Working with square grids

Let's use the `square` options of `st_make_grid` and play a bit with it.

```{r 20190530_squares, warning=FALSE, message=FALSE, tidy='styler', dpi=90, fig.align='center'}

europe  <- ne_download(50,type="map_subunits", returnclass = "sf", destdir = tempdir()) %>%
  subset(CONTINENT=="Europe")


```
